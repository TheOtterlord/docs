---
import { Icon } from "@astrojs/starlight/components";
const { class: className = '', style, href } = Astro.props;
// Wrap in <span> because Houdini is disabled for a[href] for security

const { variant = 'primary', icon = null } = Astro.props;
---

<span class:list={[`link variant-${variant}`, className]} {style}>
	<a {href}>
		<span>
      <slot />
      {icon && <Icon name={icon} size="1.5rem" class="icon"/>}
    </span>
	</a>
</span>

<style>
	.link {
		--link-color-stop-a: var(--sl-color-blue);
		--link-color-stop-b: var(--sl-color-purple);

		--border-radius: 9999;
		--background: var(--gradient-pop-1);
		position: relative;
		border-radius: calc(var(--border-radius) * 1px);
		background: var(--background);
	}
	.variant-outline {
		background: rgba(0, 0, 0, 0);
		border-radius: 0;
	}
	.link {
		--border-radius: 9999;
		--duration: 200ms;
		--delay: 30ms;
		--background: linear-gradient(180deg, var(--link-color-stop-a), var(--link-color-stop-b));
		display: flex;
		color: white;
		font-family: var(--font-display);
		font-size: var(--sl-text-lg);
		width: max-content;
	}
	.link:active {
		transform: translateY(0);
	}
  .link.variant-outline {
    color: var(--sl-color-white)
  }

  .icon {
    display: inline-block !important;
    transform: translateY(0.375rem);
    align-self: center;
  }

	a {
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 0.67rem 1.25rem;
		width: 100%;
		height: 100%;
		text-decoration: none;
		color: inherit !important;
		/* Indicates the button boundaries for forced colors users in older browsers */
		outline: 1px solid transparent;
	}

  .variant-blank a {
    padding: 0.5rem 3rem;
  }

	@media (forced-colors: active) {
		a {
			border: 1px solid LinkText;
		}
	}

	a > :global(* + *) {
		margin-inline-start: 0.25rem;
	}

	.variant-primary {
		--variant: primary;
		--background: linear-gradient(90deg, var(--link-color-stop-a), var(--link-color-stop-b));
	}
	.variant-primary:hover,
	.variant-primary:focus-within {
		--link-color-stop-a: #6d39ff;
		--link-color-stop-b: #af43ff;
	}
	.variant-primary:active {
		--link-color-stop-a: #5f31e1;
		--link-color-stop-b: #a740f3;
	}

  .variant-blank {
		--variant: primary;
		--background: var(--sl-color-black);
    color: var(--sl-color-accent-high);
    border: 2px solid var(--sl-color-accent-high);
	}

  .variant-blank:hover {
    text-decoration: underline;
  }

  :root[data-theme='light'] .variant-blank {
    color: var(--sl-color-white);
    border-color: var(--sl-color-white);
  }

	.variant-outline {
		--variant: outline;
	}
  .variant-outline:hover, .variant-outline:focus-within {
    color: var(--sl-color-accent-high);
  }
</style>
