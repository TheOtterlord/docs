---
title: Share State Between Astro Components
description: Learn how to share state across Astro components â€” with Nano Stores.
i18nReady: true
type: recipe
---

import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'

:::tip
  Using Framework components? See [how to share state between Islands](/en/core-concepts/sharing-state)!
:::

When building an Astro website, you may need to share state across components. Astro recommend the use of [Nano Stores](https://github.com/nanostores/nanostores) for shared client storage.

## Recipe

1. Install Nano Stores:

  <PackageManagerTabs>
    <Fragment slot="npm">
    ```shell
    npm install nanostores
    ```
    </Fragment>
    <Fragment slot="pnpm">
    ```shell
    pnpm install nanostores
    ```
    </Fragment>
    <Fragment slot="yarn">
    ```shell
    yarn add nanostores
    ```
    </Fragment>
  </PackageManagerTabs>

2. Create a store. In this example, the store tracks whether a dialog is open or not:

  ```ts title="src/store.js"
  import { atom } from 'nanostores';

  export const isOpen = atom(false);
  ```

3. Import and use the store in a [`script`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script) tag in your components:

  ```astro title="src/components/Button.astro"
  <button id="openDialog">Open</button>

  <script>
    import { isOpen } from '../store.js';
    
    // Set the store to true when the button is clicked
    function openDialog() {
      isOpen.set(true);
    }

    document.getElementById('openDialog').addEventListener('click', openDialog);
  </script>
  ```

  ```astro title="src/components/Dialog.astro"
  <div id="dialog" style="display: hidden">Hello world!</div>

  <script>
    import { isOpen } from '../store.js';

    // Listen to changes in the store, and show/hide the dialog accordingly    
    isOpen.subscribe(open => {
      if (open) {
        document.getElementById('dialog').style.display = 'block';
      } else {
        document.getElementById('dialog').style.display = 'none';
      }
    })

    document.getElementById('openDialog').addEventListener('click', openDialog);
  </script>
  ```

## Resources

- [Nano Stores - NPM](https://www.npmjs.com/package/nanostores)
- [Nano Stores - Vanilla JS docs](https://github.com/nanostores/nanostores#vanilla-js)
